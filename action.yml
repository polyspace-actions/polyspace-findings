name: 'polyspace-findings'
author: 'MathWorks'
description: 'Provides an entry point to analysis results without GitHub Advanced Security enabled.'
inputs:
    sarif-file:
      description: 'SARIF results file path.'
      required: true
    github-token:
      description: 'Access token generated by Github for authentication in the workflow job. Polyspace uses the token
      to authenticate when adding annotations to a commit.'
      default: ${{ github.token }}
    # Push to repository context
    set-commit-status:
      description: 'Set status of commit to PASS if there are no findings or FAIL if the SARIF results file contains findings.'
      default: true
      type: boolean
    comment-commit-findings:
      description: 'Add comment under the commit. Each result findings is added as an annotation on the line of code where the finding occurs in
      the diff view.'
      default: true
      type: boolean
    # Pull request context
    review-status:
      description: 'Type of review posted in a pull request. Valid values are "REQUEST_CHANGES" or "COMMENT".'
      default: 'COMMENT'
    comment-pull-request-findings:
      description: 'Add analysis findings to pull request as annotations. Since new pulls requests do not overwrite previous annotations,
      the diff view might end up containing many findings.'
      default: false
      type: boolean
    pull-request-number:
      description: 'Pull request number that the analysis runs on. This input evaluates to none if the action runs in a different context.'
      default: ${{ github.event.pull_request.number }}
runs:
  using: 'node16'
  main: 'dist/polyspaceFindings/index.js'
